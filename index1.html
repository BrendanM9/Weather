<!DOCTYPE html>
<html>
    <head>
        <title>Central Oregon Weather</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="weatherstyle.css">
    </head>
    <body>
        <p id="description"></p>
        <p id="temp"></p>
        <script>
            const bendID = "KORBEND727";
            const apiKey = "be3a60645b954897ba60645b95f89776";
            console.log("working");
            function drawWeather ( d ){
                console.log("Weather data \n", d);
                //var celsius = Math.round(parseFloat(d.main.temp)-273.15);
                console.log(".");
                //document.getElementById('description').innerHTML = "Description: "+ d.weather[0].description;
                document.getElementById('temp').innerHTML = d.observations[0].imperial.temp;
                console.log("!");
                console.log("Temp: \n", d.observations[0].imperial.temp);
                console.log("?");
            }

            function weatherBalloon( cityID ){
                var key = apiKey;
                fetch('https://api.weather.com/v2/pws/observations/current?stationId='+cityID+'&format=json&units=e&apiKey='+key)
                .then(function(resp) {return resp.json() })
                .then(function(data) {
                    drawWeather(data);
                })
                .catch(function(){

                });
            }
            window.onload = function() {
                weatherBalloon(bendID);
            }
        </script>
    </body>
</html>